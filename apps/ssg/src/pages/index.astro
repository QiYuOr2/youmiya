---
import { Calendar } from '@/components/calendar';
import { InteractiveEventsCalendar } from '@/components/interactiveEventsCalendar';
import Layout from '../layouts/Layout.astro';
import events from '../data/events.json'
import { groupEventsByMonth, monthString } from '@/common/events'
import { Navbar } from '@/components/navbar'

const eventsGrouped = groupEventsByMonth(events)
const prerenderId = 'prerender'
const currentMonth = monthString(0)
---

<Layout>
  {false && <Navbar />}

  <main class="max-w-[100ch] mx-auto justify-center items-start gap-4 relative z-10 px-2 lg:px-0 ">
    <h1 class="text-2xl pt-8 pb-4 px-1 font-bold">羊宫事件薄</h1>

    <div id={prerenderId}>
      <Calendar month={currentMonth} events={eventsGrouped[currentMonth]} className='op-85' />
      <div class="text-center mt-20">加载中，请稍后…</div>
    </div>

    <InteractiveEventsCalendar 
      staticId={prerenderId}
      eventsGrouped={eventsGrouped}
      client:only
    />
    </div>
  </main>

</Layout>
